<div *ngIf="quote">
  <div *ngIf="quote.success">
    <h1 class="mt-3">Here's your Insurance Quote.</h1>
    <div class="card mt-4">
      <div class="card-header">Insurance Quote</div>
      <div class="card-body">
        <div class="row">
          <div class="col">
            <strong>Reference Number:</strong><br />
            {{ quote.reference }}
          </div>
          <div class="col">
            <strong>Status:</strong><br />
            Successful
          </div>
        </div>
        <div class="row mt-3">
          <div class="col">
            <strong>Premium (Annually):</strong><br />
            ${{ quote.premium }}
          </div>
          <div class="col">
            <strong>Premium (Monthly):</strong><br />
            ${{ quote.premium }}
          </div>
        </div>
      </div>
    </div>
    <button type="submit" class="btn btn-primary mt-5" (click)="backClicked()">Go Back</button>
  </div>
  <div *ngIf="!quote.success">
    <h1 class="mt-3">Oops! We were unable to calculate the insurance premium.</h1>
    <div class="card mt-4">
      <div class="card-header">Quote Reference #{{ quote.reference }}</div>
      <div class="card-body">
        <div class="row">
          <div class="col">
            <strong>Reference Number:</strong><br />
            {{ quote.reference }}
          </div>
          <div class="col">
            <strong>Status:</strong><br />
            Failed
          </div>
        </div>
      </div>
    </div>
    <h4 class="mt-4 mb-5">Please contact our support team with the reference number above for assistance.</h4>
    <button type="submit" class="btn btn-primary" style="margin-right: 1rem;" (click)="supportClicked()">Contact Support</button>
    <button type="submit" class="btn btn-outline-primary" (click)="backClicked()">Go Back</button>
  </div>
</div>

<div *ngIf="!quote">
  <h2 class="mb-5">View Previous Quotes</h2>
  <form [formGroup]="referenceForm" (ngSubmit)="onSubmit()">
    <label for="reference" class="form-label">Quote Reference ID</label>
    <div class="has-validation input-group input-group-lg">
      <input
        type="text"
        id="reference"
        formControlName="reference"
        placeholder="example: QMU9TPITNJSUJSYF"
        class="form-control"
        [ngClass]="{
          'is-invalid': form['reference'].touched && form['reference'].invalid,
          'is-valid': form['reference'].touched && !form['reference'].invalid
        }" />
      <div class="invalid-feedback mt-2">
        <div>Reference ID must be 16 characters long</div>
      </div>
    </div>
    <div class="mt-4">
      <button type="submit" class="btn btn-primary btn-lg">View Quote</button>
    </div>
  </form>
</div>
